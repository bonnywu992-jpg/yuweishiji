
<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>æ¸å‘³é£Ÿè¨˜ - å››å·æ¿ƒé¦™å‹è¾£æ¤’é†¬</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body { font-family: 'Microsoft JhengHei', Arial, sans-serif; background: linear-gradient(135deg, #d32f2f 0%, #f44336 100%); min-height: 100vh; padding: 20px; }
.container { max-width: 800px; margin: 0 auto; background: white; border-radius: 20px; box-shadow: 0 20px 60px rgba(0,0,0,0.3); overflow: hidden; }
.header { background: linear-gradient(135deg, #b71c1c 0%, #d32f2f 100%); color: white; padding: 40px 30px; text-align: center; }
.header h1 { font-size: 2.5em; margin-bottom: 10px; text-shadow: 2px 2px 4px rgba(0,0,0,0.2); }
.header p { font-size: 1.1em; opacity: 0.95; }
.ig-link { display: inline-block; margin-top: 10px; padding: 8px 20px; background: rgba(255,255,255,0.2); border-radius: 20px; color: white; text-decoration: none; transition: background 0.3s; }
.ig-link:hover { background: rgba(255,255,255,0.3); }
.product-section { padding: 40px 30px; }
.product-card { background: linear-gradient(135deg, #fff5f5 0%, #ffebee 100%); border-radius: 15px; padding: 30px; border: 3px solid #f44336; }
.product-header { display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; margin-bottom: 20px; }
.product-name { font-size: 1.8em; color: #b71c1c; font-weight: bold; }
.product-price { font-size: 1.6em; color: #d32f2f; font-weight: bold; }
.special-badge { display: inline-block; background: #ff6b6b; color: white; padding: 5px 15px; border-radius: 20px; font-size: 0.9em; margin-left: 10px; }
.highlight { background: #fff3bf; padding: 15px; border-radius: 10px; margin: 15px 0; border-left: 4px solid #f44336; }
.highlight strong { color: #b71c1c; }
.product-intro { background: linear-gradient(135deg, #fff8f0 0%, #ffe8e8 100%); border-radius: 15px; padding: 25px; margin: 20px 0; border: 2px solid #ff6b6b; line-height: 1.8; }
.product-intro h3 { color: #b71c1c; margin-bottom: 15px; font-size: 1.3em; }
.product-intro p { color: #333; margin-bottom: 12px; font-size: 1.05em; }
.product-intro strong { color: #d32f2f; }
.features-box { background: white; border-radius: 10px; padding: 15px; margin: 15px 0; }
.feature-item { color: #d32f2f; margin-bottom: 8px; font-weight: bold; }
.feature-item:last-child { margin-bottom: 0; }
.slogan { color: #b71c1c; font-weight: bold; font-size: 1.15em; margin: 15px 0; }
.specs-box { background: #fff3bf; border-radius: 8px; padding: 12px; margin-top: 15px; border-left: 4px solid #ff6b6b; }
.specs-box div { color: #333; margin-bottom: 5px; }
.specs-box div:last-child { margin-bottom: 0; }
.form-group { margin: 20px 0; }
.form-group label { display: block; margin-bottom: 8px; color: #333; font-weight: bold; }
.form-group input, .form-group select, .form-group textarea { width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 8px; font-size: 1em; transition: border-color 0.3s; }
.form-group input:focus, .form-group select:focus, .form-group textarea:focus { outline: none; border-color: #f44336; }
.quantity-control { display: flex; align-items: center; gap: 15px; }
.quantity-control button { width: 40px; height: 40px; border: none; background: #f44336; color: white; font-size: 1.5em; border-radius: 8px; cursor: pointer; transition: background 0.3s; user-select: none; }
.quantity-control button:hover { background: #d32f2f; }
.quantity-control button:active { transform: scale(0.95); }
.quantity-control input { width: 80px; text-align: center; font-size: 1.2em; font-weight: bold; pointer-events: none; }
.total-section { background: #f8f9fa; padding: 20px; border-radius: 10px; margin: 20px 0; transition: all 0.3s ease; }
.total-row { display: flex; justify-content: space-between; margin: 10px 0; font-size: 1.1em; }
.total-row.final { font-size: 1.5em; font-weight: bold; color: #b71c1c; border-top: 2px solid #ddd; padding-top: 10px; margin-top: 15px; }
.notice { background: #fff3bf; padding: 15px; border-radius: 10px; margin: 20px 0; text-align: center; font-weight: bold; color: #b71c1c; border: 2px dashed #ffa94d; transition: all 0.3s ease; }
.submit-btn { width: 100%; padding: 18px; background: linear-gradient(135deg, #b71c1c 0%, #d32f2f 100%); color: white; border: none; border-radius: 12px; font-size: 1.3em; font-weight: bold; cursor: pointer; transition: transform 0.2s, box-shadow 0.2s; margin-bottom: 10px; }
.submit-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(183, 28, 28, 0.4); }
.submit-btn:disabled { background: #ccc; cursor: not-allowed; transform: none; }
.success-message { background: #d3f9d8; padding: 20px; border-radius: 10px; margin: 20px 0; text-align: center; color: #2b8a3e; font-weight: bold; border: 2px solid #51cf66; }
.error-message { background: #ffe3e3; padding: 20px; border-radius: 10px; margin: 20px 0; text-align: center; color: #b71c1c; font-weight: bold; border: 2px solid #f44336; }
.store-section { background: #f8f9fa; padding: 15px; border-radius: 10px; margin-top: 10px; border: 2px solid #e9ecef; }
.store-region { margin-bottom: 15px; }
.store-region:last-child { margin-bottom: 0; }
.store-region label { font-size: 0.95em; color: #495057; margin-bottom: 5px; display: block; }
#addressGroup { display: none; }
</style>
</head>
<body>
<div class="container">
  <div class="header">
    <h1>ğŸŒ¶ï¸ æ¸å‘³é£Ÿè¨˜ ğŸŒ¶ï¸</h1>
    <p>å››å·æ¿ƒé¦™å‹è¾£æ¤’é†¬</p>
    <a href="https://www.instagram.com/yuweishiji" target="_blank" class="ig-link">ğŸ“· è¿½è¹¤æˆ‘å€‘çš„ Instagram</a>
  </div>

  <div class="product-section">
    <div class="product-card">
      <div class="product-header">
        <div>
          <span class="product-name">å››å·æ¿ƒé¦™å‹è¾£æ¤’é†¬</span>
          <span class="special-badge">ğŸ”¥ éº»è¾£é®®é¦™</span>
        </div>
        <div class="product-price">NT$ 250 / ç½</div>
      </div>

      <div class="highlight">
        <strong>æ‰‹å·¥è£½ä½œã€ç„¡æ·»åŠ é˜²è…åŠ‘,é–‹å°å¾Œéœ€å†·è—ä¿å­˜ âš ï¸</strong>
      </div>

      <div class="product-intro">
        <h3>ğŸŒ¶ï¸ æ¸å‘³é£Ÿè¨˜-æ¿ƒé¦™å‹å››å·è¾£æ¤’é†¬</h3>
        <p><strong>å››å·çš„éˆé­‚,ä¸åªåœ¨éºµè£¡,ä¹Ÿåœ¨é€™ä¸€ç“¢è¾£æ²¹è£¡!</strong></p>
        <p style="color: #555;">
          æˆ‘å€‘çš„æ‰‹å·¥è¾£æ¤’,æ˜¯æ¯å¤©è¦ªç‚’ç¾åš,å¾æŒ‘æ¤’ã€ç‚¸é¦™æ–™åˆ°ç†¬æ²¹,æ¯ä¸€æ­¥éƒ½ç”¨å¿ƒã€‚<br>
          è¾£å¾—éç™®å»ä¸å—†å–‰,éº»å¾—é¦™æ°£å±¤å±¤å †ç–Šâ€”â€”æ‹Œéºµã€ç‚’èœã€æ²¾æ°´é¤ƒéƒ½è¶…æ­!
        </p>
        <div class="features-box">
          <div class="feature-item">ğŸ’¥ ç„¡æ·»åŠ é˜²è…åŠ‘</div>
          <div class="feature-item">ğŸ’¥ ç´”æ‰‹å·¥ç†¬ç…®</div>
          <div class="feature-item">ğŸ’¥ é¦™ã€éº»ã€è¾£ä¸‰å‘³ä¿±å…¨</div>
          <div class="feature-item">ğŸ’¥ æ·»åŠ 30å¤šç¨®é¦™æ–™</div>
        </div>
        <p class="slogan">ä¸€åŒ™ä¸‹å»,æ•´ç¢—éƒ½æ´»äº†ğŸ”¥</p>
        <div class="specs-box">
          <div><strong>å®¹é‡:</strong> 150g/ç“¶</div>
          <div><strong>ä¿å­˜æœŸé™:</strong> å†·è—ä¿å­˜åŠå¹´ / å¸¸æº«ä¿å­˜3å€‹æœˆ</div>
        </div>
      </div>

      <form id="orderForm">
        <div class="form-group">
          <label>è³¼è²·æ•¸é‡</label>
          <div class="quantity-control">
            <button type="button" id="btnMinus">âˆ’</button>
            <input type="number" id="qty" value="1" min="1" readonly>
            <button type="button" id="btnPlus">+</button>
          </div>
        </div>

        <div class="notice" id="freeShipNotice">ğŸ‰ è³¼è²·10ç½(å«)ä»¥ä¸Šå…é‹è²»!</div>

        <div class="form-group"><label>å§“å *</label><input type="text" id="name" required></div>
        <div class="form-group"><label>é›»è©± *</label><input type="tel" id="phone" required placeholder="ä¾‹:0912345678"></div>
        <div class="form-group"><label>Email *</label><input type="email" id="email" required></div>
        
        <div class="form-group">
          <label>å–è²¨æ–¹å¼ *</label>
          <select id="pickup" required>
            <option value="">è«‹é¸æ“‡å–è²¨æ–¹å¼</option>
            <option value="7-11">7-11 è¶…å•†å–è²¨</option>
            <option value="å…¨å®¶">å…¨å®¶è¶…å•†å–è²¨</option>
            <option value="å®…é…">å®…é…</option>
            <option value="é¢äº¤">é¢äº¤</option>
          </select>
        </div>

        <div class="form-group" id="storeSelectGroup" style="display:none;">
          <label>é¸æ“‡é–€å¸‚ *</label>
          <div class="store-section" id="storeSection"></div>
        </div>

        <div class="form-group" id="addressGroup">
          <label id="addressLabel">æ”¶è²¨åœ°å€ *</label>
          <textarea id="address" rows="3" placeholder="è«‹å¡«å¯«å®Œæ•´åœ°å€"></textarea>
        </div>

        <div class="form-group">
          <label>åŒ¯æ¬¾å¸³è™Ÿå¾Œ5ç¢¼ *</label>
          <input type="text" id="accountLast5" maxlength="5" pattern="[0-9]{5}" required placeholder="è«‹å¡«å¯«5ä½æ•¸å­—">
        </div>
        <div class="form-group">
          <label>å‚™è¨»</label>
          <textarea id="note" rows="2" placeholder="å…¶ä»–éœ€æ±‚æˆ–å‚™è¨»"></textarea>
        </div>

        <div class="total-section">
          <div class="total-row"><span>å°è¨ˆ:</span><span id="subtotalDisplay">NT$ 250</span></div>
          <div class="total-row"><span>é‹è²»:</span><span id="shippingDisplay">NT$ 130</span></div>
          <div class="total-row final"><span>ç¸½è¨ˆ:</span><span id="totalDisplay">NT$ 380</span></div>
        </div>

        <button type="submit" class="submit-btn" id="submitBtn">ç¢ºèªè¨‚è³¼</button>
        <div id="message"></div>
      </form>
    </div>
  </div>
</div>
<script>
const WEB3FORMS_ACCESS_KEY='63c8b2d8-bddb-46cb-b683-e3c0becf31bf';
const MERCHANT_EMAIL='bonnywu992@gmail.com';
var PRICE=250, SHIPPING_DELIVERY=160, SHIPPING_STORE=130, FREE_SHIPPING_QTY=10;

// å°ç£ä¾¿åˆ©å•†åº—é–€å¸‚å®Œæ•´è³‡æ–™
const storeData = {
  // åŒ—éƒ¨åœ°å€
  taipei: {
    name: "å°åŒ—å¸‚",
    stores: [
      // 7-11é–€å¸‚
      { id: "tp_711_001", name: "çµ±é ˜é–€å¸‚", brand: "7-11", address: "å°åŒ—å¸‚ä¸­æ­£å€å¿ å­è¥¿è·¯ä¸€æ®µ38è™Ÿ", phone: "02-2311-5678", lat: 25.0478, lng: 121.5170, hours: "24å°æ™‚" },
      { id: "tp_711_002", name: "ä¿¡ç¾©é–€å¸‚", brand: "7-11", address: "å°åŒ—å¸‚ä¿¡ç¾©å€ä¿¡ç¾©è·¯äº”æ®µ7è™Ÿ", phone: "02-2723-4567", lat: 25.0330, lng: 121.5654, hours: "24å°æ™‚" },
      { id: "tp_711_003", name: "æ±é–€é–€å¸‚", brand: "7-11", address: "å°åŒ—å¸‚å¤§å®‰å€ä¿¡ç¾©è·¯äºŒæ®µ198è™Ÿ", phone: "02-2321-8901", lat: 25.0338, lng: 121.5288, hours: "24å°æ™‚" },
      { id: "tp_711_004", name: "è¥¿é–€é–€å¸‚", brand: "7-11", address: "å°åŒ—å¸‚è¬è¯å€æˆéƒ½è·¯28è™Ÿ", phone: "02-2311-9876", lat: 25.0424, lng: 121.5067, hours: "24å°æ™‚" },
      { id: "tp_711_005", name: "å—æ¸¯é–€å¸‚", brand: "7-11", address: "å°åŒ—å¸‚å—æ¸¯å€å—æ¸¯è·¯ä¸€æ®µ128è™Ÿ", phone: "02-2651-3456", lat: 25.0522, lng: 121.6066, hours: "06:00-23:00" },
      { id: "tp_711_006", name: "å…§æ¹–é–€å¸‚", brand: "7-11", address: "å°åŒ—å¸‚å…§æ¹–å€æˆåŠŸè·¯å››æ®µ188è™Ÿ", phone: "02-8792-5678", lat: 25.0837, lng: 121.5788, hours: "24å°æ™‚" },
      { id: "tp_711_007", name: "æ¾å±±é–€å¸‚", brand: "7-11", address: "å°åŒ—å¸‚æ¾å±±å€å—äº¬æ±è·¯äº”æ®µ123è™Ÿ", phone: "02-2765-4321", lat: 25.0516, lng: 121.5633, hours: "24å°æ™‚" },
      { id: "tp_711_008", name: "ä¸­å±±é–€å¸‚", brand: "7-11", address: "å°åŒ—å¸‚ä¸­å±±å€å—äº¬æ±è·¯äºŒæ®µ88è™Ÿ", phone: "02-2541-7890", lat: 25.0520, lng: 121.5325, hours: "24å°æ™‚" },
      
      // å…¨å®¶é–€å¸‚
      { id: "tp_fm_001", name: "å°åŒ—è»Šç«™åº—", brand: "å…¨å®¶", address: "å°åŒ—å¸‚ä¸­æ­£å€åŒ—å¹³è¥¿è·¯3è™Ÿ", phone: "02-2312-3456", lat: 25.0475, lng: 121.5173, hours: "24å°æ™‚" },
      { id: "tp_fm_002", name: "ä¿¡ç¾©æ–°å¤©åœ°åº—", brand: "å…¨å®¶", address: "å°åŒ—å¸‚ä¿¡ç¾©å€æ¾å£½è·¯18è™Ÿ", phone: "02-2722-5678", lat: 25.0360, lng: 121.5670, hours: "24å°æ™‚" },
      { id: "tp_fm_003", name: "å¸«å¤§åº—", brand: "å…¨å®¶", address: "å°åŒ—å¸‚å¤§å®‰å€å¸«å¤§è·¯93è™Ÿ", phone: "02-2363-7890", lat: 25.0261, lng: 121.5279, hours: "06:00-23:00" },
      { id: "tp_fm_004", name: "å…¬é¤¨åº—", brand: "å…¨å®¶", address: "å°åŒ—å¸‚ä¸­æ­£å€ç¾…æ–¯ç¦è·¯å››æ®µ136è™Ÿ", phone: "02-2369-1234", lat: 25.0155, lng: 121.5345, hours: "24å°æ™‚" },
      { id: "tp_fm_005", name: "å£«æ—åº—", brand: "å…¨å®¶", address: "å°åŒ—å¸‚å£«æ—å€ä¸­æ­£è·¯288è™Ÿ", phone: "02-2883-4567", lat: 25.0939, lng: 121.5241, hours: "24å°æ™‚" },
      { id: "tp_fm_006", name: "åŒ—æŠ•åº—", brand: "å…¨å®¶", address: "å°åŒ—å¸‚åŒ—æŠ•å€ä¸­å¤®å—è·¯ä¸€æ®µ68è™Ÿ", phone: "02-2891-2345", lat: 25.1315, lng: 121.5013, hours: "06:00-23:00" },
      { id: "tp_fm_007", name: "å¤§ç›´åº—", brand: "å…¨å®¶", address: "å°åŒ—å¸‚ä¸­å±±å€åŒ—å®‰è·¯458è™Ÿ", phone: "02-8509-6789", lat: 25.0783, lng: 121.5474, hours: "24å°æ™‚" },
      { id: "tp_fm_008", name: "æœ¨æŸµåº—", brand: "å…¨å®¶", address: "å°åŒ—å¸‚æ–‡å±±å€æœ¨æŸµè·¯ä¸€æ®µ258è™Ÿ", phone: "02-2939-8765", lat: 24.9888, lng: 121.5712, hours: "06:00-23:00" },
    ]
  },
  
  new_taipei: {
    name: "æ–°åŒ—å¸‚",
    stores: [
      // 7-11é–€å¸‚
      { id: "nt_711_001", name: "æ¿æ©‹é–€å¸‚", brand: "7-11", address: "æ–°åŒ—å¸‚æ¿æ©‹å€ç¸£æ°‘å¤§é“äºŒæ®µ7è™Ÿ", phone: "02-2964-1234", lat: 25.0126, lng: 121.4627, hours: "24å°æ™‚" },
      { id: "nt_711_002", name: "æ–°èŠé–€å¸‚", brand: "7-11", address: "æ–°åŒ—å¸‚æ–°èŠå€ä¸­æ­£è·¯188è™Ÿ", phone: "02-2992-5678", lat: 25.0375, lng: 121.4503, hours: "24å°æ™‚" },
      { id: "nt_711_003", name: "ä¸­å’Œé–€å¸‚", brand: "7-11", address: "æ–°åŒ—å¸‚ä¸­å’Œå€ä¸­å’Œè·¯358è™Ÿ", phone: "02-2248-7890", lat: 24.9994, lng: 121.4978, hours: "24å°æ™‚" },
      { id: "nt_711_004", name: "æ°¸å’Œé–€å¸‚", brand: "7-11", address: "æ–°åŒ—å¸‚æ°¸å’Œå€ä¸­æ­£è·¯488è™Ÿ", phone: "02-2923-4567", lat: 25.0099, lng: 121.5165, hours: "24å°æ™‚" },
      { id: "nt_711_005", name: "ä¸‰é‡é–€å¸‚", brand: "7-11", address: "æ–°åŒ—å¸‚ä¸‰é‡å€é‡æ–°è·¯ä¸‰æ®µ128è™Ÿ", phone: "02-2976-8901", lat: 25.0625, lng: 121.4881, hours: "06:00-23:00" },
      { id: "nt_711_006", name: "è˜†æ´²é–€å¸‚", brand: "7-11", address: "æ–°åŒ—å¸‚è˜†æ´²å€ä¸­æ­£è·¯268è™Ÿ", phone: "02-2281-2345", lat: 25.0847, lng: 121.4642, hours: "24å°æ™‚" },
      { id: "nt_711_007", name: "æ–°åº—é–€å¸‚", brand: "7-11", address: "æ–°åŒ—å¸‚æ–°åº—å€åŒ—æ–°è·¯äºŒæ®µ188è™Ÿ", phone: "02-8911-6789", lat: 24.9677, lng: 121.5416, hours: "24å°æ™‚" },
      
      // å…¨å®¶é–€å¸‚
      { id: "nt_fm_001", name: "æ¿æ©‹åºœä¸­åº—", brand: "å…¨å®¶", address: "æ–°åŒ—å¸‚æ¿æ©‹å€åºœä¸­è·¯38è™Ÿ", phone: "02-2968-7890", lat: 25.0089, lng: 121.4596, hours: "24å°æ™‚" },
      { id: "nt_fm_002", name: "æ–°èŠè¼”å¤§åº—", brand: "å…¨å®¶", address: "æ–°åŒ—å¸‚æ–°èŠå€ä¸­æ­£è·¯510è™Ÿ", phone: "02-2901-2345", lat: 25.0334, lng: 121.4344, hours: "24å°æ™‚" },
      { id: "nt_fm_003", name: "åœŸåŸåº—", brand: "å…¨å®¶", address: "æ–°åŒ—å¸‚åœŸåŸå€ä¸­å¤®è·¯ä¸€æ®µ168è™Ÿ", phone: "02-2260-5678", lat: 24.9729, lng: 121.4423, hours: "06:00-23:00" },
      { id: "nt_fm_004", name: "æ·¡æ°´åº—", brand: "å…¨å®¶", address: "æ–°åŒ—å¸‚æ·¡æ°´å€ä¸­æ­£è·¯258è™Ÿ", phone: "02-2621-9876", lat: 25.1677, lng: 121.4415, hours: "24å°æ™‚" },
      { id: "nt_fm_005", name: "æ±æ­¢åº—", brand: "å…¨å®¶", address: "æ–°åŒ—å¸‚æ±æ­¢å€å¤§åŒè·¯äºŒæ®µ388è™Ÿ", phone: "02-8692-3456", lat: 25.0655, lng: 121.6422, hours: "24å°æ™‚" },
      { id: "nt_fm_006", name: "æ¨¹æ—åº—", brand: "å…¨å®¶", address: "æ–°åŒ—å¸‚æ¨¹æ—å€ä¸­å±±è·¯ä¸€æ®µ88è™Ÿ", phone: "02-2681-7890", lat: 24.9909, lng: 121.4205, hours: "06:00-23:00" },
      { id: "nt_fm_007", name: "æ—å£åº—", brand: "å…¨å®¶", address: "æ–°åŒ—å¸‚æ—å£å€æ–‡åŒ–äºŒè·¯ä¸€æ®µ128è™Ÿ", phone: "02-2608-1234", lat: 25.0779, lng: 121.3902, hours: "24å°æ™‚" },
    ]
  },
  
  taoyuan: {
    name: "æ¡ƒåœ’å¸‚",
    stores: [
      // 7-11é–€å¸‚
      { id: "ty_711_001", name: "æ¡ƒåœ’é–€å¸‚", brand: "7-11", address: "æ¡ƒåœ’å¸‚æ¡ƒåœ’å€ä¸­æ­£è·¯88è™Ÿ", phone: "03-335-6789", lat: 24.9889, lng: 121.3127, hours: "24å°æ™‚" },
      { id: "ty_711_002", name: "ä¸­å£¢é–€å¸‚", brand: "7-11", address: "æ¡ƒåœ’å¸‚ä¸­å£¢å€ä¸­å¤®è¥¿è·¯äºŒæ®µ168è™Ÿ", phone: "03-425-7890", lat: 24.9595, lng: 121.2252, hours: "24å°æ™‚" },
      { id: "ty_711_003", name: "å¹³é®é–€å¸‚", brand: "7-11", address: "æ¡ƒåœ’å¸‚å¹³é®å€ç’°å—è·¯288è™Ÿ", phone: "03-458-1234", lat: 24.9442, lng: 121.2165, hours: "24å°æ™‚" },
      { id: "ty_711_004", name: "å…«å¾·é–€å¸‚", brand: "7-11", address: "æ¡ƒåœ’å¸‚å…«å¾·å€ä»‹å£½è·¯ä¸€æ®µ888è™Ÿ", phone: "03-368-5678", lat: 24.9380, lng: 121.2967, hours: "06:00-23:00" },
      { id: "ty_711_005", name: "é¾œå±±é–€å¸‚", brand: "7-11", address: "æ¡ƒåœ’å¸‚é¾œå±±å€æ–‡åŒ–äºŒè·¯188è™Ÿ", phone: "03-328-9012", lat: 25.0504, lng: 121.3494, hours: "24å°æ™‚" },
      
      // å…¨å®¶é–€å¸‚
      { id: "ty_fm_001", name: "æ¡ƒåœ’ç«™å‰åº—", brand: "å…¨å®¶", address: "æ¡ƒåœ’å¸‚æ¡ƒåœ’å€å¾©èˆˆè·¯128è™Ÿ", phone: "03-332-4567", lat: 24.9903, lng: 121.3131, hours: "24å°æ™‚" },
      { id: "ty_fm_002", name: "ä¸­å£¢ä¸­æ­£åº—", brand: "å…¨å®¶", address: "æ¡ƒåœ’å¸‚ä¸­å£¢å€ä¸­æ­£è·¯268è™Ÿ", phone: "03-422-8901", lat: 24.9653, lng: 121.2266, hours: "24å°æ™‚" },
      { id: "ty_fm_003", name: "å¤§æºªåº—", brand: "å…¨å®¶", address: "æ¡ƒåœ’å¸‚å¤§æºªå€æ…ˆæ¹–è·¯58è™Ÿ", phone: "03-388-2345", lat: 24.8834, lng: 121.2881, hours: "06:00-22:00" },
      { id: "ty_fm_004", name: "è˜†ç«¹åº—", brand: "å…¨å®¶", address: "æ¡ƒåœ’å¸‚è˜†ç«¹å€å—å´è·¯188è™Ÿ", phone: "03-322-6789", lat: 25.0446, lng: 121.2897, hours: "24å°æ™‚" },
      { id: "ty_fm_005", name: "æ¥Šæ¢…åº—", brand: "å…¨å®¶", address: "æ¡ƒåœ’å¸‚æ¥Šæ¢…å€ä¸­å±±è·¯168è™Ÿ", phone: "03-478-1234", lat: 24.9074, lng: 121.1467, hours: "06:00-23:00" },
    ]
  },
  
  // ä¸­éƒ¨åœ°å€
  taichung: {
    name: "å°ä¸­å¸‚",
    stores: [
      // 7-11é–€å¸‚
      { id: "tc_711_001", name: "å°ä¸­é–€å¸‚", brand: "7-11", address: "å°ä¸­å¸‚ä¸­å€å°ç£å¤§é“ä¸€æ®µ188è™Ÿ", phone: "04-2227-5678", lat: 24.1377, lng: 120.6851, hours: "24å°æ™‚" },
      { id: "tc_711_002", name: "é€¢ç”²é–€å¸‚", brand: "7-11", address: "å°ä¸­å¸‚è¥¿å±¯å€æ–‡è¯è·¯88è™Ÿ", phone: "04-2451-2345", lat: 24.1791, lng: 120.6447, hours: "24å°æ™‚" },
      { id: "tc_711_003", name: "ä¸€ä¸­é–€å¸‚", brand: "7-11", address: "å°ä¸­å¸‚åŒ—å€ä¸€ä¸­è¡—128è™Ÿ", phone: "04-2225-6789", lat: 24.1476, lng: 120.6848, hours: "24å°æ™‚" },
      { id: "tc_711_004", name: "å¤§é‡Œé–€å¸‚", brand: "7-11", address: "å°ä¸­å¸‚å¤§é‡Œå€ä¸­èˆˆè·¯äºŒæ®µ288è™Ÿ", phone: "04-2406-8901", lat: 24.0989, lng: 120.6775, hours: "06:00-23:00" },
      { id: "tc_711_005", name: "è±åŸé–€å¸‚", brand: "7-11", address: "å°ä¸­å¸‚è±åŸå€ä¸­æ­£è·¯168è™Ÿ", phone: "04-2523-4567", lat: 24.2569, lng: 120.7231, hours: "24å°æ™‚" },
      { id: "tc_711_006", name: "æ²™é¹¿é–€å¸‚", brand: "7-11", address: "å°ä¸­å¸‚æ²™é¹¿å€ä¸­å±±è·¯388è™Ÿ", phone: "04-2662-7890", lat: 24.2362, lng: 120.5688, hours: "24å°æ™‚" },
      
      // å…¨å®¶é–€å¸‚
      { id: "tc_fm_001", name: "å°ä¸­ç«™å‰åº—", brand: "å…¨å®¶", address: "å°ä¸­å¸‚ä¸­å€å»ºåœ‹è·¯98è™Ÿ", phone: "04-2223-1234", lat: 24.1369, lng: 120.6852, hours: "24å°æ™‚" },
      { id: "tc_fm_002", name: "é€¢ç”²å¤§å­¸åº—", brand: "å…¨å®¶", address: "å°ä¸­å¸‚è¥¿å±¯å€ç¦æ˜Ÿè·¯528è™Ÿ", phone: "04-2452-5678", lat: 24.1797, lng: 120.6445, hours: "24å°æ™‚" },
      { id: "tc_fm_003", name: "æ±æµ·åº—", brand: "å…¨å®¶", address: "å°ä¸­å¸‚è¥¿å±¯å€å°ç£å¤§é“å››æ®µ1688è™Ÿ", phone: "04-2359-9012", lat: 24.1795, lng: 120.5982, hours: "06:00-23:00" },
      { id: "tc_fm_004", name: "å¤ªå¹³åº—", brand: "å…¨å®¶", address: "å°ä¸­å¸‚å¤ªå¹³å€ä¸­å±±è·¯ä¸‰æ®µ168è™Ÿ", phone: "04-2393-3456", lat: 24.1246, lng: 120.7240, hours: "24å°æ™‚" },
      { id: "tc_fm_005", name: "æ¸…æ°´åº—", brand: "å…¨å®¶", address: "å°ä¸­å¸‚æ¸…æ°´å€ä¸­å±±è·¯188è™Ÿ", phone: "04-2622-6789", lat: 24.2642, lng: 120.5687, hours: "06:00-23:00" },
      { id: "tc_fm_006", name: "çƒæ—¥åº—", brand: "å…¨å®¶", address: "å°ä¸­å¸‚çƒæ—¥å€å…‰æ—¥è·¯288è™Ÿ", phone: "04-2338-8901", lat: 24.1058, lng: 120.6237, hours: "24å°æ™‚" },
    ]
  },
  
  changhua: {
    name: "å½°åŒ–ç¸£",
    stores: [
      // 7-11é–€å¸‚
      { id: "ch_711_001", name: "å½°åŒ–é–€å¸‚", brand: "7-11", address: "å½°åŒ–ç¸£å½°åŒ–å¸‚ä¸­æ­£è·¯ä¸€æ®µ188è™Ÿ", phone: "04-722-3456", lat: 24.0808, lng: 120.5384, hours: "24å°æ™‚" },
      { id: "ch_711_002", name: "å“¡æ—é–€å¸‚", brand: "7-11", address: "å½°åŒ–ç¸£å“¡æ—å¸‚ä¸­å±±è·¯äºŒæ®µ268è™Ÿ", phone: "04-835-7890", lat: 23.9589, lng: 120.5746, hours: "24å°æ™‚" },
      { id: "ch_711_003", name: "å’Œç¾é–€å¸‚", brand: "7-11", address: "å½°åŒ–ç¸£å’Œç¾é®å½°ç¾è·¯ä¸‰æ®µ128è™Ÿ", phone: "04-735-1234", lat: 24.1105, lng: 120.4977, hours: "06:00-23:00" },
      
      // å…¨å®¶é–€å¸‚
      { id: "ch_fm_001", name: "å½°åŒ–ç«™å‰åº—", brand: "å…¨å®¶", address: "å½°åŒ–ç¸£å½°åŒ–å¸‚å…‰å¾©è·¯88è™Ÿ", phone: "04-728-5678", lat: 24.0815, lng: 120.5391, hours: "24å°æ™‚" },
      { id: "ch_fm_002", name: "å“¡æ—ä¸­æ­£åº—", brand: "å…¨å®¶", address: "å½°åŒ–ç¸£å“¡æ—å¸‚ä¸­æ­£è·¯168è™Ÿ", phone: "04-832-9012", lat: 23.9597, lng: 120.5739, hours: "24å°æ™‚" },
      { id: "ch_fm_003", name: "é¹¿æ¸¯åº—", brand: "å…¨å®¶", address: "å½°åŒ–ç¸£é¹¿æ¸¯é®ä¸­å±±è·¯258è™Ÿ", phone: "04-777-3456", lat: 24.0568, lng: 120.4341, hours: "06:00-22:00" },
    ]
  },
  
  nantou: {
    name: "å—æŠ•ç¸£",
    stores: [
      // 7-11é–€å¸‚
      { id: "nt_711_001", name: "å—æŠ•é–€å¸‚", brand: "7-11", address: "å—æŠ•ç¸£å—æŠ•å¸‚ä¸‰å’Œä¸‰è·¯88è™Ÿ", phone: "049-222-6789", lat: 23.9097, lng: 120.6841, hours: "06:00-23:00" },
      { id: "nt_711_002", name: "è‰å±¯é–€å¸‚", brand: "7-11", address: "å—æŠ•ç¸£è‰å±¯é®ä¸­æ­£è·¯168è™Ÿ", phone: "049-232-1234", lat: 23.9744, lng: 120.6803, hours: "24å°æ™‚" },
      { id: "nt_711_003", name: "åŸ”é‡Œé–€å¸‚", brand: "7-11", address: "å—æŠ•ç¸£åŸ”é‡Œé®ä¸­å±±è·¯ä¸‰æ®µ128è™Ÿ", phone: "049-290-5678", lat: 23.9688, lng: 120.9681, hours: "06:00-23:00" },
      
      // å…¨å®¶é–€å¸‚
      { id: "nt_fm_001", name: "å—æŠ•ä¸­èˆˆåº—", brand: "å…¨å®¶", address: "å—æŠ•ç¸£å—æŠ•å¸‚ä¸­èˆˆè·¯188è™Ÿ", phone: "049-223-9012", lat: 23.9103, lng: 120.6848, hours: "06:00-23:00" },
      { id: "nt_fm_002", name: "åŸ”é‡Œä¸­æ­£åº—", brand: "å…¨å®¶", address: "å—æŠ•ç¸£åŸ”é‡Œé®ä¸­æ­£è·¯268è™Ÿ", phone: "049-299-3456", lat: 23.9695, lng: 120.9688, hours: "06:00-22:00" },
      { id: "nt_fm_003", name: "ç«¹å±±åº—", brand: "å…¨å®¶", address: "å—æŠ•ç¸£ç«¹å±±é®é›†å±±è·¯äºŒæ®µ88è™Ÿ", phone: "049-264-6789", lat: 23.7570, lng: 120.6773, hours: "06:00-23:00" },
    ]
  },
  
  // å—éƒ¨åœ°å€
  tainan: {
    name: "å°å—å¸‚",
    stores: [
      // 7-11é–€å¸‚
      { id: "tn_711_001", name: "å°å—é–€å¸‚", brand: "7-11", address: "å°å—å¸‚ä¸­è¥¿å€ä¸­å±±è·¯88è™Ÿ", phone: "06-222-5678", lat: 22.9908, lng: 120.2022, hours: "24å°æ™‚" },
      { id: "tn_711_002", name: "æˆåŠŸé–€å¸‚", brand: "7-11", address: "å°å—å¸‚æ±å€æ±å¯§è·¯188è™Ÿ", phone: "06-237-1234", lat: 22.9858, lng: 120.2268, hours: "24å°æ™‚" },
      { id: "tn_711_003", name: "æ°¸åº·é–€å¸‚", brand: "7-11", address: "å°å—å¸‚æ°¸åº·å€ä¸­è¯è·¯268è™Ÿ", phone: "06-302-5678", lat: 23.0260, lng: 120.2571, hours: "24å°æ™‚" },
      { id: "tn_711_004", name: "å®‰å¹³é–€å¸‚", brand: "7-11", address: "å°å—å¸‚å®‰å¹³å€å®‰å¹³è·¯388è™Ÿ", phone: "06-228-9012", lat: 23.0010, lng: 120.1653, hours: "06:00-23:00" },
      { id: "tn_711_005", name: "æ–°ç‡Ÿé–€å¸‚", brand: "7-11", address: "å°å—å¸‚æ–°ç‡Ÿå€ä¸­å±±è·¯128è™Ÿ", phone: "06-632-3456", lat: 23.3104, lng: 120.3165, hours: "24å°æ™‚" },
      
      // å…¨å®¶é–€å¸‚
      { id: "tn_fm_001", name: "å°å—ç«™å‰åº—", brand: "å…¨å®¶", address: "å°å—å¸‚ä¸­è¥¿å€åŒ—é–€è·¯ä¸€æ®µ98è™Ÿ", phone: "06-228-6789", lat: 22.9971, lng: 120.2124, hours: "24å°æ™‚" },
      { id: "tn_fm_002", name: "æˆå¤§åº—", brand: "å…¨å®¶", address: "å°å—å¸‚æ±å€å¤§å­¸è·¯ä¸€æ®µ168è™Ÿ", phone: "06-275-2345", lat: 22.9976, lng: 120.2186, hours: "24å°æ™‚" },
      { id: "tn_fm_003", name: "å–„åŒ–åº—", brand: "å…¨å®¶", address: "å°å—å¸‚å–„åŒ–å€ä¸­å±±è·¯258è™Ÿ", phone: "06-581-7890", lat: 23.1326, lng: 120.2973, hours: "06:00-23:00" },
      { id: "tn_fm_004", name: "ä»å¾·åº—", brand: "å…¨å®¶", address: "å°å—å¸‚ä»å¾·å€ä¸­å±±è·¯388è™Ÿ", phone: "06-270-1234", lat: 22.9717, lng: 120.2475, hours: "24å°æ™‚" },
      { id: "tn_fm_005", name: "ä½³é‡Œåº—", brand: "å…¨å®¶", address: "å°å—å¸‚ä½³é‡Œå€ä¸­å±±è·¯188è™Ÿ", phone: "06-722-5678", lat: 23.1650, lng: 120.1778, hours: "06:00-23:00" },
    ]
  },
  
  kaohsiung: {
    name: "é«˜é›„å¸‚",
    stores: [
      // 7-11é–€å¸‚
      { id: "kh_711_001", name: "é«˜é›„é–€å¸‚", brand: "7-11", address: "é«˜é›„å¸‚å‰é‡‘å€ä¸­æ­£å››è·¯88è™Ÿ", phone: "07-215-6789", lat: 22.6273, lng: 120.3014, hours: "24å°æ™‚" },
      { id: "kh_711_002", name: "ä¸‰å¤šé–€å¸‚", brand: "7-11", address: "é«˜é›„å¸‚è‹“é›…å€ä¸‰å¤šä¸‰è·¯168è™Ÿ", phone: "07-338-1234", lat: 22.6199, lng: 120.3149, hours: "24å°æ™‚" },
      { id: "kh_711_003", name: "å·¨è›‹é–€å¸‚", brand: "7-11", address: "é«˜é›„å¸‚å·¦ç‡Ÿå€åšæ„›äºŒè·¯288è™Ÿ", phone: "07-556-5678", lat: 22.6730, lng: 120.2967, hours: "24å°æ™‚" },
      { id: "kh_711_004", name: "é³³å±±é–€å¸‚", brand: "7-11", address: "é«˜é›„å¸‚é³³å±±å€ä¸­å±±è·¯188è™Ÿ", phone: "07-742-9012", lat: 22.6268, lng: 120.3565, hours: "24å°æ™‚" },
      { id: "kh_711_005", name: "å²¡å±±é–€å¸‚", brand: "7-11", address: "é«˜é›„å¸‚å²¡å±±å€ä¸­å±±å—è·¯268è™Ÿ", phone: "07-621-3456", lat: 22.7965, lng: 120.2954, hours: "06:00-23:00" },
      { id: "kh_711_006", name: "æ¥ æ¢“é–€å¸‚", brand: "7-11", address: "é«˜é›„å¸‚æ¥ æ¢“å€å¾·æ°‘è·¯388è™Ÿ", phone: "07-364-6789", lat: 22.7333, lng: 120.3279, hours: "24å°æ™‚" },
      
      // å…¨å®¶é–€å¸‚
      { id: "kh_fm_001", name: "é«˜é›„è»Šç«™åº—", brand: "å…¨å®¶", address: "é«˜é›„å¸‚ä¸‰æ°‘å€å»ºåœ‹äºŒè·¯198è™Ÿ", phone: "07-235-2345", lat: 22.6391, lng: 120.3023, hours: "24å°æ™‚" },
      { id: "kh_fm_002", name: "å¤¢æ™‚ä»£åº—", brand: "å…¨å®¶", address: "é«˜é›„å¸‚å‰é®å€ä¸­è¯äº”è·¯789è™Ÿ", phone: "07-973-7890", lat: 22.5936, lng: 120.3080, hours: "24å°æ™‚" },
      { id: "kh_fm_003", name: "ä¸­å±±å¤§å­¸åº—", brand: "å…¨å®¶", address: "é«˜é›„å¸‚é¼“å±±å€è“®æµ·è·¯128è™Ÿ", phone: "07-525-1234", lat: 22.6267, lng: 120.2659, hours: "06:00-23:00" },
      { id: "kh_fm_004", name: "å°æ¸¯åº—", brand: "å…¨å®¶", address: "é«˜é›„å¸‚å°æ¸¯å€æ¼¢æ°‘è·¯268è™Ÿ", phone: "07-806-5678", lat: 22.5653, lng: 120.3508, hours: "24å°æ™‚" },
      { id: "kh_fm_005", name: "æ——å±±åº—", brand: "å…¨å®¶", address: "é«˜é›„å¸‚æ——å±±å€ä¸­å±±è·¯188è™Ÿ", phone: "07-661-9012", lat: 22.8892, lng: 120.4829, hours: "06:00-22:00" },
      { id: "kh_fm_006", name: "ç¾æ¿ƒåº—", brand: "å…¨å®¶", address: "é«˜é›„å¸‚ç¾æ¿ƒå€ä¸­æ­£è·¯ä¸€æ®µ88è™Ÿ", phone: "07-681-3456", lat: 22.8832, lng: 120.5402, hours: "06:00-23:00" },
    ]
  },
  
  pingtung: {
    name: "å±æ±ç¸£",
    stores: [
      // 7-11é–€å¸‚
      { id: "pt_711_001", name: "å±æ±é–€å¸‚", brand: "7-11", address: "å±æ±ç¸£å±æ±å¸‚ä¸­æ­£è·¯188è™Ÿ", phone: "08-732-5678", lat: 22.6687, lng: 120.4881, hours: "24å°æ™‚" },
      { id: "pt_711_002", name: "æ½®å·é–€å¸‚", brand: "7-11", address: "å±æ±ç¸£æ½®å·é®æ–°ç”Ÿè·¯268è™Ÿ", phone: "08-788-1234", lat: 22.5507, lng: 120.5422, hours: "06:00-23:00" },
      { id: "pt_711_003", name: "æ±æ¸¯é–€å¸‚", brand: "7-11", address: "å±æ±ç¸£æ±æ¸¯é®ä¸­å±±è·¯128è™Ÿ", phone: "08-832-5678", lat: 22.4653, lng: 120.4544, hours: "24å°æ™‚" },
      
      // å…¨å®¶é–€å¸‚
      { id: "pt_fm_001", name: "å±æ±ç«™å‰åº—", brand: "å…¨å®¶", address: "å±æ±ç¸£å±æ±å¸‚å…‰å¾©è·¯88è™Ÿ", phone: "08-736-9012", lat: 22.6694, lng: 120.4888, hours: "24å°æ™‚" },
      { id: "pt_fm_002", name: "æ†æ˜¥åº—", brand: "å…¨å®¶", address: "å±æ±ç¸£æ†æ˜¥é®ä¸­å±±è·¯168è™Ÿ", phone: "08-889-3456", lat: 22.0025, lng: 120.7456, hours: "06:00-23:00" },
      { id: "pt_fm_003", name: "è¬ä¸¹åº—", brand: "å…¨å®¶", address: "å±æ±ç¸£è¬ä¸¹é„‰ä¸­æ­£è·¯268è™Ÿ", phone: "08-777-6789", lat: 22.5878, lng: 120.4843, hours: "06:00-23:00" },
    ]
  },
  
  // æ±éƒ¨åœ°å€
  hualien: {
    name: "èŠ±è“®ç¸£",
    stores: [
      // 7-11é–€å¸‚
      { id: "hl_711_001", name: "èŠ±è“®é–€å¸‚", brand: "7-11", address: "èŠ±è“®ç¸£èŠ±è“®å¸‚ä¸­å±±è·¯188è™Ÿ", phone: "03-832-5678", lat: 23.9769, lng: 121.6069, hours: "24å°æ™‚" },
      { id: "hl_711_002", name: "å‰å®‰é–€å¸‚", brand: "7-11", address: "èŠ±è“®ç¸£å‰å®‰é„‰ä¸­å±±è·¯ä¸‰æ®µ268è™Ÿ", phone: "03-853-1234", lat: 23.9679, lng: 121.5805, hours: "06:00-23:00" },
      { id: "hl_711_003", name: "æ–°åŸé–€å¸‚", brand: "7-11", address: "èŠ±è“®ç¸£æ–°åŸé„‰æ–°èˆˆè·¯88è™Ÿ", phone: "03-861-5678", lat: 24.1286, lng: 121.6431, hours: "06:00-22:00" },
      
      // å…¨å®¶é–€å¸‚
      { id: "hl_fm_001", name: "èŠ±è“®ç«™å‰åº—", brand: "å…¨å®¶", address: "èŠ±è“®ç¸£èŠ±è“®å¸‚åœ‹è¯ä¸€è·¯98è™Ÿ", phone: "03-835-9012", lat: 23.9775, lng: 121.6076, hours: "24å°æ™‚" },
      { id: "hl_fm_002", name: "æ±è¯åº—", brand: "å…¨å®¶", address: "èŠ±è“®ç¸£å£½è±é„‰å¿—å­¸æ‘ä¸­æ­£è·¯168è™Ÿ", phone: "03-866-3456", lat: 23.8958, lng: 121.5469, hours: "06:00-23:00" },
      { id: "hl_fm_003", name: "ç‰é‡Œåº—", brand: "å…¨å®¶", address: "èŠ±è“®ç¸£ç‰é‡Œé®ä¸­è¯è·¯258è™Ÿ", phone: "03-888-6789", lat: 23.3340, lng: 121.3145, hours: "06:00-23:00" },
    ]
  },
  
  taitung: {
    name: "å°æ±ç¸£",
    stores: [
      // 7-11é–€å¸‚
      { id: "tt_711_001", name: "å°æ±é–€å¸‚", brand: "7-11", address: "å°æ±ç¸£å°æ±å¸‚ä¸­è¯è·¯ä¸€æ®µ188è™Ÿ", phone: "089-322-5678", lat: 22.7585, lng: 121.1444, hours: "24å°æ™‚" },
      { id: "tt_711_002", name: "æˆåŠŸé–€å¸‚", brand: "7-11", address: "å°æ±ç¸£æˆåŠŸé®ä¸­å±±è·¯128è™Ÿ", phone: "089-851-1234", lat: 23.0995, lng: 121.3690, hours: "06:00-22:00" },
      { id: "tt_711_003", name: "é—œå±±é–€å¸‚", brand: "7-11", address: "å°æ±ç¸£é—œå±±é®ä¸­æ­£è·¯88è™Ÿ", phone: "089-811-5678", lat: 23.0449, lng: 121.1651, hours: "06:00-23:00" },
      
      // å…¨å®¶é–€å¸‚
      { id: "tt_fm_001", name: "å°æ±ç«™å‰åº—", brand: "å…¨å®¶", address: "å°æ±ç¸£å°æ±å¸‚éµèŠ±è·¯268è™Ÿ", phone: "089-326-9012", lat: 22.7592, lng: 121.1451, hours: "24å°æ™‚" },
      { id: "tt_fm_002", name: "å‘å—åº—", brand: "å…¨å®¶", address: "å°æ±ç¸£å‘å—é„‰æ›´ç”ŸåŒ—è·¯168è™Ÿ", phone: "089-229-3456", lat: 22.7866, lng: 121.1230, hours: "06:00-23:00" },
      { id: "tt_fm_003", name: "æ± ä¸Šåº—", brand: "å…¨å®¶", address: "å°æ±ç¸£æ± ä¸Šé„‰ä¸­å±±è·¯188è™Ÿ", phone: "089-862-6789", lat: 23.1195, lng: 121.2189, hours: "06:00-22:00" },
    ]
  },
  
  yilan: {
    name: "å®œè˜­ç¸£",
    stores: [
      // 7-11é–€å¸‚
      { id: "yl_711_001", name: "å®œè˜­é–€å¸‚", brand: "7-11", address: "å®œè˜­ç¸£å®œè˜­å¸‚ä¸­å±±è·¯äºŒæ®µ188è™Ÿ", phone: "03-932-5678", lat: 24.7571, lng: 121.7540, hours: "24å°æ™‚" },
      { id: "yl_711_002", name: "ç¾…æ±é–€å¸‚", brand: "7-11", address: "å®œè˜­ç¸£ç¾…æ±é®å…¬æ­£è·¯268è™Ÿ", phone: "03-955-1234", lat: 24.6743, lng: 121.7696, hours: "24å°æ™‚" },
      { id: "yl_711_003", name: "é ­åŸé–€å¸‚", brand: "7-11", address: "å®œè˜­ç¸£é ­åŸé®é’é›²è·¯ä¸€æ®µ128è™Ÿ", phone: "03-977-5678", lat: 24.8586, lng: 121.8225, hours: "06:00-23:00" },
      { id: "yl_711_004", name: "ç¤æºªé–€å¸‚", brand: "7-11", address: "å®œè˜­ç¸£ç¤æºªé„‰ä¸­å±±è·¯äºŒæ®µ88è™Ÿ", phone: "03-988-9012", lat: 24.8228, lng: 121.7720, hours: "24å°æ™‚" },
      
      // å…¨å®¶é–€å¸‚
      { id: "yl_fm_001", name: "å®œè˜­ç«™å‰åº—", brand: "å…¨å®¶", address: "å®œè˜­ç¸£å®œè˜­å¸‚å…‰å¾©è·¯98è™Ÿ", phone: "03-936-3456", lat: 24.7578, lng: 121.7547, hours: "24å°æ™‚" },
      { id: "yl_fm_002", name: "ç¾…æ±å¤œå¸‚åº—", brand: "å…¨å®¶", address: "å®œè˜­ç¸£ç¾…æ±é®èˆˆæ±è·¯168è™Ÿ", phone: "03-956-6789", lat: 24.6750, lng: 121.7703, hours: "24å°æ™‚" },
      { id: "yl_fm_003", name: "è˜‡æ¾³åº—", brand: "å…¨å®¶", address: "å®œè˜­ç¸£è˜‡æ¾³é®ä¸­å±±è·¯ä¸€æ®µ258è™Ÿ", phone: "03-996-2345", lat: 24.5959, lng: 121.8457, hours: "06:00-23:00" },
      { id: "yl_fm_004", name: "å†¬å±±åº—", brand: "å…¨å®¶", address: "å®œè˜­ç¸£å†¬å±±é„‰ä¸­æ­£è·¯188è™Ÿ", phone: "03-959-7890", lat: 24.6334, lng: 121.7932, hours: "06:00-23:00" },
    ]
  },
  
  // æ–°ç«¹åœ°å€
  hsinchu_city: {
    name: "æ–°ç«¹å¸‚",
    stores: [
      // 7-11é–€å¸‚
      { id: "hc_711_001", name: "æ–°ç«¹é–€å¸‚", brand: "7-11", address: "æ–°ç«¹å¸‚æ±å€ä¸­æ­£è·¯88è™Ÿ", phone: "03-522-5678", lat: 24.8047, lng: 120.9714, hours: "24å°æ™‚" },
      { id: "hc_711_002", name: "æ¸…å¤§é–€å¸‚", brand: "7-11", address: "æ–°ç«¹å¸‚æ±å€å…‰å¾©è·¯äºŒæ®µ188è™Ÿ", phone: "03-571-1234", lat: 24.7954, lng: 120.9939, hours: "24å°æ™‚" },
      { id: "hc_711_003", name: "äº¤å¤§é–€å¸‚", brand: "7-11", address: "æ–°ç«¹å¸‚æ±å€å¤§å­¸è·¯268è™Ÿ", phone: "03-573-5678", lat: 24.7869, lng: 120.9971, hours: "24å°æ™‚" },
      { id: "hc_711_004", name: "ç«¹ç§‘é–€å¸‚", brand: "7-11", address: "æ–°ç«¹å¸‚æ±å€ç§‘å­¸åœ’å€åŠ›è¡Œè·¯128è™Ÿ", phone: "03-577-9012", lat: 24.7817, lng: 120.9946, hours: "06:00-23:00" },
      
      // å…¨å®¶é–€å¸‚
      { id: "hc_fm_001", name: "æ–°ç«¹ç«™å‰åº—", brand: "å…¨å®¶", address: "æ–°ç«¹å¸‚æ±å€ä¸­è¯è·¯äºŒæ®µ98è™Ÿ", phone: "03-526-3456", lat: 24.8054, lng: 120.9721, hours: "24å°æ™‚" },
      { id: "hc_fm_002", name: "åŸéšå»Ÿåº—", brand: "å…¨å®¶", address: "æ–°ç«¹å¸‚åŒ—å€ä¸­å±±è·¯168è™Ÿ", phone: "03-525-6789", lat: 24.8066, lng: 120.9683, hours: "24å°æ™‚" },
      { id: "hc_fm_003", name: "å·¨åŸåº—", brand: "å…¨å®¶", address: "æ–°ç«¹å¸‚æ±å€ä¸­å¤®è·¯288è™Ÿ", phone: "03-535-2345", lat: 24.8138, lng: 120.9752, hours: "24å°æ™‚" },
      { id: "hc_fm_004", name: "é¦™å±±åº—", brand: "å…¨å®¶", address: "æ–°ç«¹å¸‚é¦™å±±å€ä¸­è¯è·¯äº”æ®µ388è™Ÿ", phone: "03-538-7890", lat: 24.7681, lng: 120.9143, hours: "06:00-23:00" },
    ]
  },
  
  hsinchu_county: {
    name: "æ–°ç«¹ç¸£",
    stores: [
      // 7-11é–€å¸‚
      { id: "hcc_711_001", name: "ç«¹åŒ—é–€å¸‚", brand: "7-11", address: "æ–°ç«¹ç¸£ç«¹åŒ—å¸‚å…‰æ˜å…­è·¯188è™Ÿ", phone: "03-555-5678", lat: 24.8387, lng: 121.0082, hours: "24å°æ™‚" },
      { id: "hcc_711_002", name: "ç«¹æ±é–€å¸‚", brand: "7-11", address: "æ–°ç«¹ç¸£ç«¹æ±é®æ±æ—è·¯268è™Ÿ", phone: "03-596-1234", lat: 24.7359, lng: 121.0888, hours: "24å°æ™‚" },
      { id: "hcc_711_003", name: "æ¹–å£é–€å¸‚", brand: "7-11", address: "æ–°ç«¹ç¸£æ¹–å£é„‰ä¸­æ­£è·¯äºŒæ®µ128è™Ÿ", phone: "03-569-5678", lat: 24.8993, lng: 121.0408, hours: "06:00-23:00" },
      
      // å…¨å®¶é–€å¸‚
      { id: "hcc_fm_001", name: "ç«¹åŒ—é«˜éµåº—", brand: "å…¨å®¶", address: "æ–°ç«¹ç¸£ç«¹åŒ—å¸‚é«˜éµä¸ƒè·¯98è™Ÿ", phone: "03-658-9012", lat: 24.8394, lng: 121.0398, hours: "24å°æ™‚" },
      { id: "hcc_fm_002", name: "æ–°è±åº—", brand: "å…¨å®¶", address: "æ–°ç«¹ç¸£æ–°è±é„‰å»ºèˆˆè·¯ä¸€æ®µ168è™Ÿ", phone: "03-559-3456", lat: 24.9009, lng: 120.9861, hours: "06:00-23:00" },
      { id: "hcc_fm_003", name: "é—œè¥¿åº—", brand: "å…¨å®¶", address: "æ–°ç«¹ç¸£é—œè¥¿é®ä¸­æ­£è·¯258è™Ÿ", phone: "03-587-6789", lat: 24.7886, lng: 121.1771, hours: "06:00-23:00" },
    ]
  },
  
  // è‹—æ —åœ°å€
  miaoli: {
    name: "è‹—æ —ç¸£",
    stores: [
      // 7-11é–€å¸‚
      { id: "ml_711_001", name: "è‹—æ —é–€å¸‚", brand: "7-11", address: "è‹—æ —ç¸£è‹—æ —å¸‚ä¸­æ­£è·¯188è™Ÿ", phone: "037-322-5678", lat: 24.5650, lng: 120.8214, hours: "24å°æ™‚" },
      { id: "ml_711_002", name: "é ­ä»½é–€å¸‚", brand: "7-11", address: "è‹—æ —ç¸£é ­ä»½å¸‚ä¸­å¤®è·¯268è™Ÿ", phone: "037-662-1234", lat: 24.6966, lng: 120.9062, hours: "24å°æ™‚" },
      { id: "ml_711_003", name: "ç«¹å—é–€å¸‚", brand: "7-11", address: "è‹—æ —ç¸£ç«¹å—é®ä¸­å±±è·¯128è™Ÿ", phone: "037-472-5678", lat: 24.6879, lng: 120.8743, hours: "24å°æ™‚" },
      { id: "ml_711_004", name: "é€šéœ„é–€å¸‚", brand: "7-11", address: "è‹—æ —ç¸£é€šéœ„é®ä¸­å±±è·¯88è™Ÿ", phone: "037-752-9012", lat: 24.4893, lng: 120.6776, hours: "06:00-23:00" },
      
      // å…¨å®¶é–€å¸‚
      { id: "ml_fm_001", name: "è‹—æ —ç«™å‰åº—", brand: "å…¨å®¶", address: "è‹—æ —ç¸£è‹—æ —å¸‚åºœå‰è·¯98è™Ÿ", phone: "037-326-3456", lat: 24.5657, lng: 120.8221, hours: "24å°æ™‚" },
      { id: "ml_fm_002", name: "é ­ä»½ä¸­å¤®åº—", brand: "å…¨å®¶", address: "è‹—æ —ç¸£é ­ä»½å¸‚å’Œå¹³è·¯168è™Ÿ", phone: "037-666-6789", lat: 24.6973, lng: 120.9069, hours: "24å°æ™‚" },
      { id: "ml_fm_003", name: "è‹‘è£¡åº—", brand: "å…¨å®¶", address: "è‹—æ —ç¸£è‹‘è£¡é®ä¸­å±±è·¯258è™Ÿ", phone: "037-862-2345", lat: 24.4432, lng: 120.6502, hours: "06:00-23:00" },
      { id: "ml_fm_004", name: "ä¸‰ç¾©åº—", brand: "å…¨å®¶", address: "è‹—æ —ç¸£ä¸‰ç¾©é„‰ä¸­æ­£è·¯188è™Ÿ", phone: "037-872-7890", lat: 24.4132, lng: 120.7586, hours: "06:00-22:00" },
    ]
  },
  
  // é›²æ—åœ°å€
  yunlin: {
    name: "é›²æ—ç¸£",
    stores: [
      // 7-11é–€å¸‚
      { id: "yl_711_001", name: "æ–—å…­é–€å¸‚", brand: "7-11", address: "é›²æ—ç¸£æ–—å…­å¸‚ä¸­å±±è·¯188è™Ÿ", phone: "05-532-5678", lat: 23.7118, lng: 120.5440, hours: "24å°æ™‚" },
      { id: "yl_711_002", name: "è™å°¾é–€å¸‚", brand: "7-11", address: "é›²æ—ç¸£è™å°¾é®å…‰å¾©è·¯268è™Ÿ", phone: "05-632-1234", lat: 23.7076, lng: 120.4388, hours: "24å°æ™‚" },
      { id: "yl_711_003", name: "åŒ—æ¸¯é–€å¸‚", brand: "7-11", address: "é›²æ—ç¸£åŒ—æ¸¯é®ä¸­å±±è·¯128è™Ÿ", phone: "05-783-5678", lat: 23.5745, lng: 120.3005, hours: "06:00-23:00" },
      
      // å…¨å®¶é–€å¸‚
      { id: "yl_fm_001", name: "æ–—å…­ç«™å‰åº—", brand: "å…¨å®¶", address: "é›²æ—ç¸£æ–—å…­å¸‚æ°‘ç”Ÿè·¯98è™Ÿ", phone: "05-536-9012", lat: 23.7125, lng: 120.5447, hours: "24å°æ™‚" },
      { id: "yl_fm_002", name: "è¥¿èºåº—", brand: "å…¨å®¶", address: "é›²æ—ç¸£è¥¿èºé®å»¶å¹³è·¯168è™Ÿ", phone: "05-586-3456", lat: 23.7973, lng: 120.4668, hours: "06:00-23:00" },
      { id: "yl_fm_003", name: "åœŸåº«åº—", brand: "å…¨å®¶", address: "é›²æ—ç¸£åœŸåº«é®ä¸­æ­£è·¯258è™Ÿ", phone: "05-662-6789", lat: 23.6800, lng: 120.3932, hours: "06:00-23:00" },
    ]
  },
  
  // å˜‰ç¾©åœ°å€
  chiayi_city: {
    name: "å˜‰ç¾©å¸‚",
    stores: [
      // 7-11é–€å¸‚
      { id: "cy_711_001", name: "å˜‰ç¾©é–€å¸‚", brand: "7-11", address: "å˜‰ç¾©å¸‚æ±å€ä¸­å±±è·¯188è™Ÿ", phone: "05-222-5678", lat: 23.4800, lng: 120.4491, hours: "24å°æ™‚" },
      { id: "cy_711_002", name: "å˜‰å¤§é–€å¸‚", brand: "7-11", address: "å˜‰ç¾©å¸‚æ±å€å­¸åºœè·¯268è™Ÿ", phone: "05-277-1234", lat: 23.4739, lng: 120.4793, hours: "24å°æ™‚" },
      { id: "cy_711_003", name: "å‚æ¥Šé–€å¸‚", brand: "7-11", address: "å˜‰ç¾©å¸‚è¥¿å€å‚æ¥Šè·¯128è™Ÿ", phone: "05-285-5678", lat: 23.4762, lng: 120.4348, hours: "06:00-23:00" },
      
      // å…¨å®¶é–€å¸‚
      { id: "cy_fm_001", name: "å˜‰ç¾©ç«™å‰åº—", brand: "å…¨å®¶", address: "å˜‰ç¾©å¸‚è¥¿å€ä¸­å±±è·¯98è™Ÿ", phone: "05-226-9012", lat: 23.4807, lng: 120.4498, hours: "24å°æ™‚" },
      { id: "cy_fm_002", name: "æ–‡åŒ–åº—", brand: "å…¨å®¶", address: "å˜‰ç¾©å¸‚æ±å€æ–‡åŒ–è·¯168è™Ÿ", phone: "05-276-3456", lat: 23.4821, lng: 120.4654, hours: "24å°æ™‚" },
      { id: "cy_fm_003", name: "å˜‰åŒ—åº—", brand: "å…¨å®¶", address: "å˜‰ç¾©å¸‚è¥¿å€åŒ—æ¸¯è·¯258è™Ÿ", phone: "05-233-6789", lat: 23.4894, lng: 120.4372, hours: "06:00-23:00" },
    ]
  },
  
  chiayi_county: {
    name: "å˜‰ç¾©ç¸£",
    stores: [
      // 7-11é–€å¸‚
      { id: "cyc_711_001", name: "å¤ªä¿é–€å¸‚", brand: "7-11", address: "å˜‰ç¾©ç¸£å¤ªä¿å¸‚ç¥¥å’Œä¸€è·¯188è™Ÿ", phone: "05-362-5678", lat: 23.4591, lng: 120.3329, hours: "24å°æ™‚" },
      { id: "cyc_711_002", name: "æ°‘é›„é–€å¸‚", brand: "7-11", address: "å˜‰ç¾©ç¸£æ°‘é›„é„‰ä¸­æ¨‚è·¯268è™Ÿ", phone: "05-226-1234", lat: 23.5524, lng: 120.4297, hours: "06:00-23:00" },
      { id: "cyc_711_003", name: "æœ´å­é–€å¸‚", brand: "7-11", address: "å˜‰ç¾©ç¸£æœ´å­å¸‚å±±é€šè·¯128è™Ÿ", phone: "05-379-5678", lat: 23.4648, lng: 120.2474, hours: "06:00-23:00" },
      
      // å…¨å®¶é–€å¸‚
      { id: "cyc_fm_001", name: "å¤ªä¿é«˜éµåº—", brand: "å…¨å®¶", address: "å˜‰ç¾©ç¸£å¤ªä¿å¸‚é«˜éµå¤§é“98è™Ÿ", phone: "05-366-9012", lat: 23.4598, lng: 120.3141, hours: "24å°æ™‚" },
      { id: "cyc_fm_002", name: "æ°´ä¸Šåº—", brand: "å…¨å®¶", address: "å˜‰ç¾©ç¸£æ°´ä¸Šé„‰ä¸­å±±è·¯äºŒæ®µ168è™Ÿ", phone: "05-268-3456", lat: 23.4276, lng: 120.3979, hours: "06:00-23:00" },
      { id: "cyc_fm_003", name: "ç«¹å´åº—", brand: "å…¨å®¶", address: "å˜‰ç¾©ç¸£ç«¹å´é„‰ä¸­æ­£è·¯258è™Ÿ", phone: "05-261-6789", lat: 23.5163, lng: 120.5497, hours: "06:00-22:00" },
    ]
  },
  
  // é›¢å³¶åœ°å€
  penghu: {
    name: "æ¾æ¹–ç¸£",
    stores: [
      // 7-11é–€å¸‚
      { id: "ph_711_001", name: "é¦¬å…¬é–€å¸‚", brand: "7-11", address: "æ¾æ¹–ç¸£é¦¬å…¬å¸‚ä¸­æ­£è·¯88è™Ÿ", phone: "06-927-5678", lat: 23.5668, lng: 119.5790, hours: "06:00-23:00" },
      { id: "ph_711_002", name: "æ¹–è¥¿é–€å¸‚", brand: "7-11", address: "æ¾æ¹–ç¸£æ¹–è¥¿é„‰ä¸­æ­£è·¯128è™Ÿ", phone: "06-992-1234", lat: 23.5857, lng: 119.6523, hours: "06:00-22:00" },
      
      // å…¨å®¶é–€å¸‚
      { id: "ph_fm_001", name: "é¦¬å…¬ä¸­æ­£åº—", brand: "å…¨å®¶", address: "æ¾æ¹–ç¸£é¦¬å…¬å¸‚ä¸­æ­£è·¯168è™Ÿ", phone: "06-926-5678", lat: 23.5675, lng: 119.5797, hours: "06:00-23:00" },
      { id: "ph_fm_002", name: "æ©Ÿå ´åº—", brand: "å…¨å®¶", address: "æ¾æ¹–ç¸£æ¹–è¥¿é„‰éš˜é–€æ‘æ©Ÿå ´è·¯258è™Ÿ", phone: "06-921-9012", lat: 23.5683, lng: 119.6281, hours: "06:00-22:00" },
    ]
  },
  
  kinmen: {
    name: "é‡‘é–€ç¸£",
    stores: [
      // 7-11é–€å¸‚
      { id: "km_711_001", name: "é‡‘åŸé–€å¸‚", brand: "7-11", address: "é‡‘é–€ç¸£é‡‘åŸé®æ°‘æ—è·¯88è™Ÿ", phone: "082-325-678", lat: 24.4323, lng: 118.3170, hours: "06:00-23:00" },
      { id: "km_711_002", name: "é‡‘æ¹–é–€å¸‚", brand: "7-11", address: "é‡‘é–€ç¸£é‡‘æ¹–é®ä¸­æ­£è·¯128è™Ÿ", phone: "082-332-234", lat: 24.4366, lng: 118.4123, hours: "06:00-22:00" },
      
      // å…¨å®¶é–€å¸‚
      { id: "km_fm_001", name: "é‡‘åŸæ°‘ç”Ÿåº—", brand: "å…¨å®¶", address: "é‡‘é–€ç¸£é‡‘åŸé®æ°‘ç”Ÿè·¯168è™Ÿ", phone: "082-326-901", lat: 24.4330, lng: 118.3177, hours: "06:00-23:00" },
      { id: "km_fm_002", name: "æ²™ç¾åº—", brand: "å…¨å®¶", address: "é‡‘é–€ç¸£é‡‘æ²™é®æ²™ç¾è¡—258è™Ÿ", phone: "082-352-345", lat: 24.4913, lng: 118.4205, hours: "06:00-22:00" },
    ]
  },
  
  lienchiang: {
    name: "é€£æ±Ÿç¸£(é¦¬ç¥–)",
    stores: [
      // 7-11é–€å¸‚
      { id: "lc_711_001", name: "å—ç«¿é–€å¸‚", brand: "7-11", address: "é€£æ±Ÿç¸£å—ç«¿é„‰ä»‹å£½æ‘88è™Ÿ", phone: "0836-25678", lat: 26.1502, lng: 119.9296, hours: "06:00-22:00" },
      
      // å…¨å®¶é–€å¸‚
      { id: "lc_fm_001", name: "å—ç«¿ä¸­å¿ƒåº—", brand: "å…¨å®¶", address: "é€£æ±Ÿç¸£å—ç«¿é„‰æ¸…æ°´æ‘168è™Ÿ", phone: "0836-26901", lat: 26.1509, lng: 119.9303, hours: "06:00-22:00" },
    ]
  }
};

// è¼”åŠ©å‡½æ•¸ï¼šä¾å“ç‰Œç¯©é¸é–€å¸‚
function getStoresByBrand(brand) {
  const result = [];
  for (const region in storeData) {
    const stores = storeData[region].stores.filter(store => store.brand === brand);
    if (stores.length > 0) {
      result.push({
        region: storeData[region].name,
        stores: stores
      });
    }
  }
  return result;
}

// è¼”åŠ©å‡½æ•¸ï¼šä¾å€åŸŸå–å¾—é–€å¸‚
function getStoresByRegion(regionKey) {
  return storeData[regionKey] || null;
}

// è¼”åŠ©å‡½æ•¸ï¼šæœå°‹é–€å¸‚ï¼ˆä¾åç¨±æˆ–åœ°å€ï¼‰
function searchStores(keyword) {
  const result = [];
  for (const region in storeData) {
    const stores = storeData[region].stores.filter(store => 
      store.name.includes(keyword) || 
      store.address.includes(keyword)
    );
    if (stores.length > 0) {
      result.push({
        region: storeData[region].name,
        stores: stores
      });
    }
  }
  return result;
}

// è¼”åŠ©å‡½æ•¸ï¼šè¨ˆç®—å…©é»è·é›¢ï¼ˆç°¡å–®çš„ç¶“ç·¯åº¦è·é›¢è¨ˆç®—ï¼‰
function calculateDistance(lat1, lng1, lat2, lng2) {
  const R = 6371; // åœ°çƒåŠå¾‘ï¼ˆå…¬é‡Œï¼‰
  const dLat = (lat2 - lat1) * Math.PI / 180;
  const dLng = (lng2 - lng1) * Math.PI / 180;
  const a = Math.sin(dLat/2) * Math.sin(dLat/2) +
            Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *
            Math.sin(dLng/2) * Math.sin(dLng/2);
  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
  return R * c;
}

// è¼”åŠ©å‡½æ•¸ï¼šå°‹æ‰¾æœ€è¿‘çš„é–€å¸‚
function findNearestStores(lat, lng, limit = 5) {
  const allStores = [];
  for (const region in storeData) {
    storeData[region].stores.forEach(store => {
      const distance = calculateDistance(lat, lng, store.lat, store.lng);
      allStores.push({
        ...store,
        region: storeData[region].name,
        distance: distance.toFixed(2)
      });
    });
  }
  return allStores.sort((a, b) => a.distance - b.distance).slice(0, limit);
}

// çµ±è¨ˆè³‡è¨Š
function getStatistics() {
  let total = 0;
  let byBrand = { "7-11": 0, "å…¨å®¶": 0 };
  let byRegion = {};
  
  for (const region in storeData) {
    const stores = storeData[region].stores;
    total += stores.length;
    byRegion[storeData[region].name] = stores.length;
    
    stores.forEach(store => {
      byBrand[store.brand]++;
    });
  }
  
  return {
    total,
    byBrand,
    byRegion
  };
}

// åŒ¯å‡º
export { 
  storeData, 
  getStoresByBrand, 
  getStoresByRegion, 
  searchStores, 
  findNearestStores,
  getStatistics 
};

var qtyInput=document.getElementById('qty');
var btnPlus=document.getElementById('btnPlus');
var btnMinus=document.getElementById('btnMinus');
var subtotalDisplay=document.getElementById('subtotalDisplay');
var shippingDisplay=document.getElementById('shippingDisplay');
var totalDisplay=document.getElementById('totalDisplay');
var freeShipNotice=document.getElementById('freeShipNotice');
var pickupSelect=document.getElementById('pickup');
var storeSelectGroup=document.getElementById('storeSelectGroup');
var addressGroup=document.getElementById('addressGroup');
var storeSection=document.getElementById('storeSection');
var selectedStore = '';
var citySelect, districtSelect, storeSelect;

function generateOrderId(){
    var now=new Date();
    var year=now.getFullYear();
    var month=String(now.getMonth()+1).padStart(2,'0');
    var day=String(now.getDate()).padStart(2,'0');
    var random=Math.floor(Math.random()*10000).toString().padStart(4,'0');
    return 'YW'+year+month+day+random;
}

function updatePrice(){
    var qty=parseInt(qtyInput.value);
    if(isNaN(qty)||qty<1){ qty=1; qtyInput.value=1; }
    var subtotal=PRICE*qty;
    var pickupMethod=pickupSelect.value;
    var shipping=0;
    
    if(pickupMethod === 'å®…é…'){
        shipping = (qty>=FREE_SHIPPING_QTY) ? 0 : SHIPPING_DELIVERY;
    } else if(pickupMethod === '7-11' || pickupMethod === 'å…¨å®¶'){
        shipping = (qty>=FREE_SHIPPING_QTY) ? 0 : SHIPPING_STORE;
    } else if(pickupMethod === 'é¢äº¤'){
        shipping = 0;
    } else {
        shipping = (qty>=FREE_SHIPPING_QTY) ? 0 : SHIPPING_STORE;
    }
    
    var total=subtotal+shipping;
    subtotalDisplay.textContent='NT$ '+subtotal;
    
    if(shipping === 0){
        if(pickupMethod === 'é¢äº¤'){
            shippingDisplay.textContent='å…é‹è²» (é¢äº¤) âœ“';
        } else {
            shippingDisplay.textContent='å…é‹è²» âœ“';
        }
    } else {
        shippingDisplay.textContent='NT$ '+shipping;
    }
    
    totalDisplay.textContent='NT$ '+total;

    if(pickupMethod === 'é¢äº¤'){
        freeShipNotice.textContent='ğŸ‰ é¢äº¤å…é‹è²»!';
        freeShipNotice.style.background='#d3f9d8';
    } else if(qty<FREE_SHIPPING_QTY){
        var left=FREE_SHIPPING_QTY-qty;
        freeShipNotice.textContent='å†è²· '+left+' ç½å³å¯å…é‹ ğŸ';
        freeShipNotice.style.background='#fff3bf';
    } else {
        var savedAmount = (pickupMethod === 'å®…é…') ? SHIPPING_DELIVERY : SHIPPING_STORE;
        freeShipNotice.textContent='ğŸ‰ å·²é”å…é‹é–€æª»!æ­å–œçœä¸‹ NT$ '+savedAmount+' é‹è²»!';
        freeShipNotice.style.background='#d3f9d8';
    }
}

function renderStoreOptions(pickupMethod) {
    storeSection.innerHTML = '';
    selectedStore = '';
    
    if (!storeData[pickupMethod]) return;
    
    var stores = storeData[pickupMethod];
    
    var cityDiv = document.createElement('div');
    cityDiv.className = 'store-region';
    var cityLabel = document.createElement('label');
    cityLabel.textContent = 'é¸æ“‡åŸå¸‚';
    cityDiv.appendChild(cityLabel);
    
    citySelect = document.createElement('select');
    citySelect.className = 'form-group';
    citySelect.style.width = '100%';
    citySelect.style.marginTop = '5px';
    var cityDefault = document.createElement('option');
    cityDefault.value = '';
    cityDefault.textContent = 'è«‹é¸æ“‡åŸå¸‚';
    citySelect.appendChild(cityDefault);
    
    Object.keys(stores).forEach(function(city) {
        var option = document.createElement('option');
        option.value = city;
        option.textContent = city;
        citySelect.appendChild(option);
    });
    cityDiv.appendChild(citySelect);
    storeSection.appendChild(cityDiv);
    
    var districtDiv = document.createElement('div');
    districtDiv.className = 'store-region';
    var districtLabel = document.createElement('label');
    districtLabel.textContent = 'é¸æ“‡å€åŸŸ';
    districtDiv.appendChild(districtLabel);
    
    districtSelect = document.createElement('select');
    districtSelect.className = 'form-group';
    districtSelect.style.width = '100%';
    districtSelect.style.marginTop = '5px';
    districtSelect.disabled = true;
    var districtDefault = document.createElement('option');
    districtDefault.value = '';
    districtDefault.textContent = 'è«‹å…ˆé¸æ“‡åŸå¸‚';
    districtSelect.appendChild(districtDefault);
    districtDiv.appendChild(districtSelect);
    storeSection.appendChild(districtDiv);
    
    var storeDiv = document.createElement('div');
    storeDiv.className = 'store-region';
    var storeLabel = document.createElement('label');
    storeLabel.textContent = 'é¸æ“‡é–€å¸‚';
    storeDiv.appendChild(storeLabel);
    
    storeSelect = document.createElement('select');
    storeSelect.className = 'form-group';
    storeSelect.style.width = '100%';
    storeSelect.style.marginTop = '5px';
    storeSelect.disabled = true;
    var storeDefault = document.createElement('option');
    storeDefault.value = '';
    storeDefault.textContent = 'è«‹å…ˆé¸æ“‡å€åŸŸ';
    storeSelect.appendChild(storeDefault);
    storeDiv.appendChild(storeSelect);
    storeSection.appendChild(storeDiv);
    
    citySelect.addEventListener('change', function() {
        var selectedCity = this.value;
        districtSelect.innerHTML = '';
        storeSelect.innerHTML = '';
        storeSelect.disabled = true;
        selectedStore = '';
        
        var districtDefault = document.createElement('option');
        districtDefault.value = '';
        districtDefault.textContent = 'è«‹é¸æ“‡å€åŸŸ';
        districtSelect.appendChild(districtDefault);
        
        var storeDefault = document.createElement('option');
        storeDefault.value = '';
        storeDefault.textContent = 'è«‹å…ˆé¸æ“‡å€åŸŸ';
        storeSelect.appendChild(storeDefault);
        
        if (selectedCity && stores[selectedCity]) {
            districtSelect.disabled = false;
            Object.keys(stores[selectedCity]).forEach(function(district) {
                var option = document.createElement('option');
                option.value = district;
                option.textContent = district;
                districtSelect.appendChild(option);
            });
        } else {
            districtSelect.disabled = true;
        }
    });
    
    districtSelect.addEventListener('change', function() {
        var selectedCity = citySelect.value;
        var selectedDistrict = this.value;
        storeSelect.innerHTML = '';
        selectedStore = '';
        
        var storeDefault = document.createElement('option');
        storeDefault.value = '';
        storeDefault.textContent = 'è«‹é¸æ“‡é–€å¸‚';
        storeSelect.appendChild(storeDefault);
        
        if (selectedCity && selectedDistrict && stores[selectedCity][selectedDistrict]) {
            storeSelect.disabled = false;
            stores[selectedCity][selectedDistrict].forEach(function(store) {
                var option = document.createElement('option');
                option.value = selectedCity + '-' + selectedDistrict + '-' + store;
                option.textContent = store;
                storeSelect.appendChild(option);
            });
        } else {
            storeSelect.disabled = true;
        }
    });
    
    storeSelect.addEventListener('change', function() {
        selectedStore = this.value;
    });
}

pickupSelect.addEventListener('change', function() {
    var method = this.value;
    var addressInput = document.getElementById('address');
    var addressLabel = document.getElementById('addressLabel');
    
    if (method === '7-11' || method === 'å…¨å®¶') {
        storeSelectGroup.style.display = 'block';
        addressGroup.style.display = 'none';
        addressInput.value = '';
        addressInput.readOnly = false;
        addressInput.style.backgroundColor = '';
        renderStoreOptions(method);
    } else if (method === 'å®…é…') {
        storeSelectGroup.style.display = 'none';
        addressGroup.style.display = 'block';
        addressLabel.textContent = 'æ”¶è²¨åœ°å€ *';
        addressInput.placeholder = 'è«‹å¡«å¯«å®Œæ•´åœ°å€';
        addressInput.value = '';
        addressInput.readOnly = false;
        addressInput.style.backgroundColor = '';
    } else if (method === 'é¢äº¤') {
        storeSelectGroup.style.display = 'none';
        addressGroup.style.display = 'block';
        addressLabel.textContent = 'é¢äº¤åœ°é»';
        addressInput.value = '802é«˜é›„å¸‚è‹“é›…å€æ­¦å»Ÿè·¯206è™Ÿ';
        addressInput.readOnly = true;
        addressInput.style.backgroundColor = '#f0f0f0';
        addressInput.placeholder = '';
    } else {
        storeSelectGroup.style.display = 'none';
        addressGroup.style.display = 'none';
        addressInput.value = '';
        addressInput.readOnly = false;
        addressInput.style.backgroundColor = '';
    }
    
    updatePrice();
});

btnPlus.addEventListener('click',function(e){e.preventDefault();qtyInput.value=parseInt(qtyInput.value)+1;updatePrice();});
btnMinus.addEventListener('click',function(e){e.preventDefault();if(parseInt(qtyInput.value)>1){qtyInput.value=parseInt(qtyInput.value)-1;updatePrice();}});

document.getElementById('orderForm').addEventListener('submit',async function(e){
    e.preventDefault();
    var submitBtn=document.getElementById('submitBtn');
    var messageDiv=document.getElementById('message');

    var phone=document.getElementById('phone').value.trim();
    var account=document.getElementById('accountLast5').value.trim();
    var pickupMethod=document.getElementById('pickup').value;
    var addressInput=document.getElementById('address').value.trim();
    
    if(!/^09\d{8}$/.test(phone)){ messageDiv.innerHTML='<div class="error-message">âŒ è«‹è¼¸å…¥æ­£ç¢ºæ‰‹æ©Ÿè™Ÿç¢¼(ä¾‹:0912345678)</div>'; return; }
    if(!/^\d{5}$/.test(account)){ messageDiv.innerHTML='<div class="error-message">âŒ å¸³è™Ÿå¾Œ5ç¢¼å¿…é ˆæ˜¯5ä½æ•¸å­—</div>'; return; }
    
    var finalAddress = '';
    if (pickupMethod === '7-11' || pickupMethod === 'å…¨å®¶') {
        if (!selectedStore) {
            messageDiv.innerHTML='<div class="error-message">âŒ è«‹é¸æ“‡é–€å¸‚</div>';
            return;
        }
        finalAddress = selectedStore;
    } else if (pickupMethod === 'å®…é…' || pickupMethod === 'é¢äº¤') {
        if (addressInput.length < 5) {
            messageDiv.innerHTML='<div class="error-message">âŒ è«‹å¡«å¯«å®Œæ•´åœ°å€æˆ–åœ°é»</div>';
            return;
        }
        finalAddress = addressInput;
    } else {
        messageDiv.innerHTML='<div class="error-message">âŒ è«‹é¸æ“‡å–è²¨æ–¹å¼</div>';
        return;
    }

    submitBtn.disabled=true; submitBtn.textContent='è™•ç†ä¸­...'; messageDiv.innerHTML='';

    try{
        var qty=parseInt(qtyInput.value);
        var subtotal=PRICE*qty;
        var shipping=0;
        
        if(pickupMethod === 'å®…é…'){
            shipping = (qty>=FREE_SHIPPING_QTY) ? 0 : SHIPPING_DELIVERY;
        } else if(pickupMethod === '7-11' || pickupMethod === 'å…¨å®¶'){
            shipping = (qty>=FREE_SHIPPING_QTY) ? 0 : SHIPPING_STORE;
        } else if(pickupMethod === 'é¢äº¤'){
            shipping = 0;
        }
        
        var total=subtotal+shipping;
        var orderId=generateOrderId();
        var orderTime=new Date().toLocaleString('zh-TW',{year:'numeric',month:'2-digit',day:'2-digit',hour:'2-digit',minute:'2-digit',hour12:false});
        var customerName=document.getElementById('name').value;
        var customerEmail=document.getElementById('email').value;
        var note=document.getElementById('note').value||'ç„¡';

        var merchantEmailContent=`â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
ğŸ›’ æ–°è¨‚å–®é€šçŸ¥ - æ¸å‘³é£Ÿè¨˜
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
è¨‚å–®ç·¨è™Ÿ:${orderId}
è¨‚å–®æ™‚é–“:${orderTime}
å§“å:${customerName}
é›»è©±:${phone}
Email:${customerEmail}
å–è²¨æ–¹å¼:${pickupMethod}
æ”¶è²¨åœ°å€/é–€å¸‚:${finalAddress}
åŒ¯æ¬¾å¸³è™Ÿå¾Œ5ç¢¼:${account}
å•†å“åç¨±:ã€æ¸å‘³é£Ÿè¨˜ã€‘å››å·æ¿ƒé¦™å‹è¾£æ¤’é†¬
å–®åƒ¹:NT$ ${PRICE}
æ•¸é‡:${qty} ç½
å°è¨ˆ:NT$ ${subtotal}
å•†å“å°è¨ˆ:NT$ ${subtotal}
é‹è²»:${shipping===0?(pickupMethod==='é¢äº¤'?'å…é‹è²» (é¢äº¤) âœ“':'å…é‹è²» âœ“'):'NT$ '+shipping}
è¨‚å–®ç¸½é¡:NT$ ${total}
å‚™è¨»:${note}
æé†’äº‹é …:
${pickupMethod==='é¢äº¤'?'âš ï¸ æ­¤è¨‚å–®é¸æ“‡é¢äº¤,è«‹é€é Instagram èˆ‡å®¢æˆ¶ç¢ºèªæ™‚é–“åœ°é»':''}
${shipping===0&&pickupMethod!=='é¢äº¤'?'âœ… æ­¤è¨‚å–®å·²é”å…é‹é–€æª»':''}
${pickupMethod==='é¢äº¤'?'âœ… é¢äº¤å…é‹è²»':''}`;

        await fetch('https://api.web3forms.com/submit',{
            method:'POST',
            headers:{'Content-Type':'application/json','Accept':'application/json'},
            body:JSON.stringify({access_key:WEB3FORMS_ACCESS_KEY,subject:`ğŸ›’ æ–°è¨‚å–® ${orderId} - æ¸å‘³é£Ÿè¨˜`,from_name:'æ¸å‘³é£Ÿè¨˜è¨‚è³¼ç³»çµ±',email:MERCHANT_EMAIL,message:merchantEmailContent})
        });

        var customerEmailContent=`è¦ªæ„›çš„ ${customerName} æ‚¨å¥½:
æ„Ÿè¬æ‚¨æ–¼ æ¸å‘³é£Ÿè¨˜ ä¸‹å–®!
è¨‚å–®ç·¨è™Ÿ:${orderId}
å•†å“:ã€æ¸å‘³é£Ÿè¨˜ã€‘å››å·æ¿ƒé¦™å‹è¾£æ¤’é†¬ x ${qty} ç½
å°è¨ˆ:NT$ ${subtotal}
é‹è²»:${shipping===0?(pickupMethod==='é¢äº¤'?'å…é‹è²» (é¢äº¤) âœ“':'å…é‹è²» âœ“'):'NT$ '+shipping}
ç¸½è¨ˆ:NT$ ${total}
å–è²¨æ–¹å¼:${pickupMethod}
æ”¶è²¨åœ°å€/é–€å¸‚:${finalAddress}
å‚™è¨»:${note}
è«‹è¨˜ä½æ‚¨çš„è¨‚å–®ç·¨è™Ÿä»¥ä¾¿æŸ¥è©¢
âš ï¸ è‹¥é¸æ“‡é¢äº¤,è«‹é€é Instagram ç§è¨Šæˆ‘å€‘ç¢ºèªæ™‚é–“åœ°é»
Instagram: @yuweishiji`;

        await fetch('https://api.web3forms.com/submit',{
            method:'POST',
            headers:{'Content-Type':'application/json','Accept':'application/json'},
            body:JSON.stringify({access_key:WEB3FORMS_ACCESS_KEY,from_name:'æ¸å‘³é£Ÿè¨˜è¨‚è³¼ç³»çµ±',email:customerEmail,message:customerEmailContent})
        });

        messageDiv.innerHTML=`<div class="success-message">
âœ… è¨‚å–®å·²æˆåŠŸé€å‡º!<br><br>
<strong>è¨‚å–®ç·¨è™Ÿ:${orderId}</strong><br><br>
æˆ‘å€‘å·²æ”¶åˆ°æ‚¨çš„è¨‚å–®,æœƒç›¡å¿«èˆ‡æ‚¨è¯ç¹«ã€‚<br>
${pickupMethod==='é¢äº¤'?'<br>âš ï¸ æ‚¨é¸æ“‡äº†é¢äº¤,è«‹é€é Instagram ç§è¨Šæˆ‘å€‘ç¢ºèªæ™‚é–“åœ°é»ã€‚<br>':''}
<br>è«‹è¨˜ä½æ‚¨çš„è¨‚å–®ç·¨è™Ÿä»¥ä¾¿æŸ¥è©¢ã€‚<br>
ğŸ“§ ç¢ºèªä¿¡å·²ç™¼é€è‡³æ‚¨çš„ Email<br>
Instagram: @yuweishiji
</div>`;

        document.getElementById('orderForm').reset();
        qtyInput.value=1;
        selectedStore = '';
        storeSelectGroup.style.display = 'none';
        addressGroup.style.display = 'none';
        updatePrice();

    } catch(err){
        console.error(err);
        messageDiv.innerHTML=`<div class="error-message">
âŒ è¨‚å–®é€å‡ºå¤±æ•—<br><br>
è«‹ç¨å¾Œå†è©¦,æˆ–ç›´æ¥é€é Instagram è¯ç¹«æˆ‘å€‘:<br><strong>@yuweishiji</strong>
</div>`;
    } finally{
        submitBtn.disabled=false; submitBtn.textContent='ç¢ºèªè¨‚è³¼';
    }
});

updatePrice();
</script>
</body>
</html>



